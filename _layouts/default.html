<!DOCTYPE html>
<html lang="{{ page.lang | default: 'en' }}">
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1{% if page.max_scale %}, maximum-scale={{ page.max_scale }}{% endif %}{% if page.min_scale %}, minimum-scale={{ page.min_scale }}{% endif %}{% if page.user_scalable == false %}, user-scalable=no{% endif %}{% if page.minimal_ui %}, minimal-ui{% endif %}">
    {% capture favicon_file %}{{ 'favicon.html' }}{%- endcapture -%}
    {%- capture favicon -%}{%- include {{ favicon_file }} -%}{%- endcapture -%}
    {%- assign favicon_lines = favicon | newline_to_br | strip_newlines | split: '<br />' -%}
    {% for line in favicon_lines %}
    {{ line }}
    {%- endfor- %}

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    {%- if page.css -%}
    {% for css in page.css %}
    <link rel="stylesheet" href="{{ css | replace: '&quot;', '' }}">
    {%- endfor -%}
    {% endif %}

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    {%- capture navbar_file -%}{{ page.navbar | default: 'nav.html' }}{%- endcapture -%}
    {%- capture navbar -%}{%- include {{ navbar_file }} -%}{%- endcapture -%}
    {%- assign navbar_lines = navbar | newline_to_br | strip_newlines | split: '<br />' -%}
    {% for line in navbar_lines %}
    {{ line }}
    {%- endfor- %}

    {% assign content_lines = content | newline_to_br | strip_newlines | split: '<br />' %}
    {%- if page.skip_container -%}
    {% for line in content_lines %}
    {{ line }}
    {%- endfor- %}
    {%- else -%}
    <div class="container">
      {% for line in content_lines %}
      {{ line }}
      {%- endfor -%}
      {{ '' }}
    </div>
    {% endif %}

    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    {%- if page.scripts -%}
    {% for script in page.scripts %}
    <script src="{{ script | replace: '&quot;', '' }}"></script>
    {%- endfor -%}
    {% endif %}

    <script>
      $(function () {
        const userJson = localStorage.getItem('user');
        if (!userJson) return;
        const user = JSON.parse(userJson);
        if (!user || !user.id || !user.username) return;
        $('.user-sign-in-link').addClass('hidden');
        $('.user-sign-out-link').addClass('shown');
        $('.user-profile-text').html(user.username);
        $('.user-profile-link').addClass('shown');
        $('.user-profile-dropdown').addClass('shown');
      });
    </script>
  </body>
</html>
