!function(e){var n={};function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(o,a,function(n){return e[n]}.bind(null,a));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n,t){"use strict";var o=t(1),a={get:function(e){var n=a.settings[e],t=localStorage.getItem(e);if(void 0===n.getURLValue&&(n.getURLValue=function(){return o.urlParameter(e)}),n.getURLValue&&0!=n.getURLValue){var r=n.getURLValue();r&&(t=r)}return void 0===t||null===t?n.defaultValue:"boolean"==n.type?"true"==t:"float"==n.type?parseFloat(t):"json"==n.type?JSON.parse(t):t},set:function(e,n){var t=a.settings[e];t.getURLValue=!1,"json"==t.type?localStorage.setItem(e,JSON.stringify(n)):localStorage.setItem(e,n)},settings:{showGyms:{type:"boolean",defaultValue:!0},showPokestops:{type:"boolean",defaultValue:!1},showPortals:{type:"boolean",defaultValue:!1},showParks:{type:"boolean",defaultValue:!1},highlightNewFeatures:{type:"boolean",defaultValue:!1},s2Cells:{type:"json",defaultValue:[]},s2CellColors:{type:"json",defaultValue:{1:"#FF6F00",2:"#F57F17",3:"#827717",4:"#33691E",5:"#1B5E20",6:"#004D40",7:"#006064",8:"#01579B",9:"#0D47A1",10:"#1A237E",11:"#6A1B9A",12:"#AD1457",13:"#b71c1c",14:"#BF360C",15:"#FF7043",16:"#FFCA28",17:"#FDD835",18:"#00796B",19:"#0288D1",20:"#64B5F6"}},mapCenter:{type:"json",defaultValue:{lat:52.63282,lng:1.29732}},zoomLevel:{type:"float",defaultValue:13}}};e.exports=a},function(e,n,t){"use strict";e.exports={urlParameter:function(e){var n=decodeURIComponent(window.location.search.substring(1)).split("&"),t=void 0;return $.each(n,function(n,o){var a=o.split("="),r=a[0],l=a[1];if(r==e&&void 0!==l)return t=l,!1}),t},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},coordinateToLatLng:function(e){return new google.maps.LatLng(e[0],e[1])},dateToString:function(e){function n(e){return e<10?"0"+e:e}return n(e.getFullYear())+"-"+n(e.getMonth())+"-"+n(e.getDate())},isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)}}},,,function(e,n,t){"use strict";var o=t(0),a=t(1),r="https://raw.githubusercontent.com/pogo-excalibur/images/master/pogo";function l(e){if(e.pokemon)return{url:r+"/"+e.pokemon.id+".png",scaledSize:new google.maps.Size(34,34),anchor:new google.maps.Point(17,17)}}window.initMap=function(){var e=new google.maps.Map(document.getElementById("map"),{center:o.get("mapCenter"),zoom:o.get("zoomLevel"),gestureHandling:"greedy",fullscreenControl:!1,streetViewControl:!0,mapTypeControl:!0,clickableIcons:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.LEFT_BOTTOM,mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID]}});!function(e){var n=[function(){var e=$.ajax({type:"GET",url:"https://api.pokemongonorwich.uk/nests?action=get",dataType:"json"});return Promise.resolve(e)}().then(function(e){return console.log(e),$.each(e,function(e,n){n.center=a.coordinateToLatLng([n.latitude,n.longitude]),n.region=$.map(n.coords,function(e){return a.coordinateToLatLng(e)}),n.permalinkName=n.name.replace(/[^\w]/g,"").toLowerCase()}),e}),Promise.resolve($.getJSON("/data/pokemon.json"))];Promise.all(n).then(function(e){var n=e[0],t=e[1];return $.each(t,function(e,n){n.id=e}),$.each(n,function(e,n){n.pokemon&&(n.pokemon=t[n.pokemon])}),n}).then(function(n){$.each(n,function(n,t){!function(e,n){function t(){n.label.isOpen?(n.label.close(),n.label.isOpen=!1):(n.label.setPosition(n.center),n.label.open(e),n.label.isOpen=!0)}n.polygon=function(e){return new google.maps.Polygon({paths:e.region,fillColor:"green",fillOpacity:.5,strokeColor:"green",strokeOpacity:1,strokeWeight:0})}(n),n.polygon.setMap(e),n.marker=function(e){return l(e)?new google.maps.Marker({position:e.center,icon:l(e)}):new google.maps.Marker}(n),n.marker.setMap(e),n.label=function(e){var n=location.protocol+"//"+location.host+location.pathname+"?nest="+e.permalinkName,t='\n    <div class="nest-label">\n      <div class="nest-label-name">\n        <b>'+e.name+'</b>\n        <a href="'+n+'"><span class="fas fa-link"></span></a>\n      </div>\n      <div class="nest-label-pokemon">\n        Species: '+function(e){return e?e.name+" (#"+e.id+")":"?"}(e.pokemon)+"\n      </div>\n    </div>";return new google.maps.InfoWindow({content:t})}(n),n.label.isOpen=!1,n.polygon.addListener("click",function(){t()}),n.marker.addListener("click",function(){t()}),e.addListener("click",function(){n.label.close(),n.label.isOpen=!1}),n.label.addListener("closeclick",function(){n.label.isOpen=!1})}(e,t)})}).then(function(n){var t=a.urlParameter("nest");if(t){var o=void 0;$.each(n,function(e,n){if(n.permalinkName==t)return o=n,!1}),o&&(e.panTo(o.center),e.setZoom(17))}return n})}(e),function(e){google.maps.event.addListener(e,"idle",function(){o.set("mapCenter",{lat:e.getCenter().lat(),lng:e.getCenter().lng()}),o.set("zoomLevel",e.getZoom())})}(e)}}]);
//# sourceMappingURL=nests.min.js.map