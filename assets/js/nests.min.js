!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";var o=n(1),a={get:function(e){var t=a.settings[e],n=localStorage.getItem(e);if(void 0===t.getURLValue&&(t.getURLValue=function(){return o.urlParameter(e)}),t.getURLValue&&0!=t.getURLValue){var r=t.getURLValue();r&&(n=r)}return void 0===n||null===n?t.defaultValue:"boolean"==t.type?"true"==n:"float"==t.type?parseFloat(n):"json"==t.type?JSON.parse(n):n},set:function(e,t){var n=a.settings[e];n.getURLValue=!1,"json"==n.type?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t)},settings:{showGyms:{type:"boolean",defaultValue:!0},showPokestops:{type:"boolean",defaultValue:!1},showPortals:{type:"boolean",defaultValue:!1},showParks:{type:"boolean",defaultValue:!1},highlightNewFeatures:{type:"boolean",defaultValue:!1},s2Cells:{type:"json",defaultValue:[]},s2CellColors:{type:"json",defaultValue:{1:"#FF6F00",2:"#F57F17",3:"#827717",4:"#33691E",5:"#1B5E20",6:"#004D40",7:"#006064",8:"#01579B",9:"#0D47A1",10:"#1A237E",11:"#6A1B9A",12:"#AD1457",13:"#b71c1c",14:"#BF360C",15:"#FF7043",16:"#FFCA28",17:"#FDD835",18:"#00796B",19:"#0288D1",20:"#64B5F6"}},mapCenter:{type:"json",defaultValue:{lat:52.63282,lng:1.29732}},zoomLevel:{type:"float",defaultValue:13}}};e.exports=a},function(e,t,n){"use strict";e.exports={urlParameter:function(e){var t=decodeURIComponent(window.location.search.substring(1)).split("&"),n=void 0;return $.each(t,function(t,o){var a=o.split("="),r=a[0],i=a[1];if(r==e&&void 0!==i)return n=i,!1}),n},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},coordinateToLatLng:function(e){return new google.maps.LatLng(e[0],e[1])},dateToString:function(e){function t(e){return e<10?"0"+e:e}return t(e.getFullYear())+"-"+t(e.getMonth())+"-"+t(e.getDate())},isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)}}},,,function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{},this.map=t.map,this.lookup=t.lookup,this.matchFilter=t.matchFilter,this.size=t.size||4,this.searchBox=this._createInput(),this.dropdown=this._createDropdown(),this._attachInputListener(),this.options.placeholder&&this.setPlaceholder(this.options.placeholder),this.options.startDisabled&&this.disable()}return o(e,[{key:"enable",value:function(){this.searchBox.prop("disabled",!1)}},{key:"disable",value:function(){this.searchBox.prop("disabled",!0)}},{key:"setPlaceholder",value:function(e){this.searchBox.attr("placeholder",e)}},{key:"clear",value:function(){this.dropdown.empty()}},{key:"add",value:function(e){var t=this,n=document.createElement("div");if(n.setAttribute("class","pac-item"),e.icon){var o=document.createElement("span");o.setAttribute("class","pac-icon pac-icon-"+e.icon),n.appendChild(o)}var a=document.createElement("span");if(a.setAttribute("class","pac-item-query"),a.innerHTML=e.name,n.appendChild(a),e.description){var r=document.createElement("span");r.innerHTML=e.description,n.appendChild(r)}this.dropdown[0].appendChild(n),$(n).click(function(){t.map.panTo(e.location),e.label&&e.label.open&&e.label.open(t.map)})}},{key:"_createInput",value:function(){var e=$(document.createElement("input"));return e.attr("id","pac-input"),e.attr("class","controls"),e.attr("type","text"),e}},{key:"_createDropdown",value:function(){var e=$(document.createElement("div"));return e.attr("class","pac-container  pac-logo"),e.appendTo("body"),e}},{key:"_attachInputListener",value:function(){var e=this;this.searchBox.on("input",function(t){if(e.clear(),e.lookup){var n=e.lookup(t.currentTarget.value);e.matchFilter&&(n=n.filter(e.matchFilter)),$.each(n.slice(0,e.size),function(t,n){e.add(n)}),e.dropdown.show()}})}},{key:"input",get:function(){return this.searchBox[0]}}]),e}();e.exports=a},function(e,t,n){"use strict";var o=n(0),a=n(1),r=n(4),i="https://raw.githubusercontent.com/pogo-excalibur/images/master/pogo";function l(e){if(e.pokemon)return{url:i+"/"+e.pokemon.id+".png",scaledSize:new google.maps.Size(34,34),anchor:new google.maps.Point(17,17)}}window.initMap=function(){var e=new google.maps.Map(document.getElementById("map"),{center:o.get("mapCenter"),zoom:o.get("zoomLevel"),gestureHandling:"greedy",fullscreenControl:!1,streetViewControl:!0,mapTypeControl:!0,clickableIcons:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.LEFT_BOTTOM,mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID]}});!function(e){e.searchBox=new r({map:e,size:4,placeholder:"Search Nests",startDisabled:!0}),e.controls[google.maps.ControlPosition.TOP_LEFT].push(e.searchBox.input),$(document).click(function(){e.searchBox.dropdown.hide()}),e.searchBox.searchBox.click(function(e){e.stopPropagation()})}(e),function(e){var t=[function(){var e=$.ajax({type:"GET",url:"https://api.pokemongonorwich.uk/nests?action=get",dataType:"json"});return Promise.resolve(e)}().then(function(e){return $.each(e,function(e,t){t.center=a.coordinateToLatLng([t.latitude,t.longitude]),t.location=t.center,t.region=$.map(t.coords,function(e){return a.coordinateToLatLng(e)}),t.permalinkName=t.name.replace(/[^\w]/g,"").toLowerCase()}),e}),Promise.resolve($.getJSON("/data/pokemon.json"))];Promise.all(t).then(function(t){var n=t[0],o=t[1];$.each(o,function(e,t){t.id=e}),$.each(n,function(e,t){t.pokemon&&(t.pokemon=o[t.pokemon])}),$.each(n,function(t,n){!function(e,t){function n(){t.label.isOpen?(t.label.close(),t.label.isOpen=!1):(t.label.setPosition(t.center),t.label.open(e),t.label.isOpen=!0)}t.polygon=function(e){return new google.maps.Polygon({paths:e.region,fillColor:"green",fillOpacity:.5,strokeColor:"green",strokeOpacity:1,strokeWeight:0})}(t),t.polygon.setMap(e),t.marker=function(e){return l(e)?new google.maps.Marker({position:e.center,icon:l(e)}):new google.maps.Marker}(t),t.marker.setMap(e),t.label=function(e){var t=location.protocol+"//"+location.host+location.pathname+"?nest="+e.permalinkName,n='\n    <div class="nest-label">\n      <div class="nest-label-name">\n        <b>'+e.name+'</b>\n        <a href="'+t+'"><span class="fas fa-link"></span></a>\n      </div>\n      <div class="nest-label-pokemon">\n        Species: '+function(e){return e?e.name+" (#"+e.id+")":"?"}(e.pokemon)+"\n      </div>\n    </div>";return new google.maps.InfoWindow({content:n})}(t),t.label.isOpen=!1,t.polygon.addListener("click",function(){n()}),t.marker.addListener("click",function(){n()}),e.addListener("click",function(){t.label.close(),t.label.isOpen=!1}),t.label.addListener("closeclick",function(){t.label.isOpen=!1})}(e,n)}),e.nests=n,e.nests.nameLookup=new Fuse(e.nests,{shouldSort:!0,threshold:.5,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["name"]}),e.searchBox.lookup=function(t){return e.nests.nameLookup.search(t)},e.searchBox.enable();var r=a.urlParameter("nest");if(r){var i=void 0;$.each(n,function(e,t){if(t.permalinkName==r)return i=t,!1}),i&&(e.panTo(i.center),e.setZoom(17))}return n})}(e),function(e){google.maps.event.addListener(e,"idle",function(){o.set("mapCenter",{lat:e.getCenter().lat(),lng:e.getCenter().lng()}),o.set("zoomLevel",e.getZoom())})}(e)}}]);
//# sourceMappingURL=nests.min.js.map