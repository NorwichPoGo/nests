!function(e){var n={};function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(o,a,function(n){return e[n]}.bind(null,a));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e,n,t){"use strict";e.exports={urlParameter:function(e){var n=decodeURIComponent(window.location.search.substring(1)).split("&"),t=void 0;return $.each(n,function(n,o){var a=o.split("="),r=a[0],i=a[1];if(r==e&&void 0!==i)return t=i,!1}),t},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},coordinateToLatLng:function(e){return new google.maps.LatLng(e[0],e[1])},dateToString:function(e){function n(e){return e<10?"0"+e:e}return n(e.getFullYear())+"-"+n(e.getMonth())+"-"+n(e.getDate())}}},function(e,n,t){"use strict";var o=t(0),a={get:function(e){var n=a.settings[e],t=localStorage.getItem(e);if(void 0===n.getURLValue&&(n.getURLValue=function(){return o.urlParameter(e)}),n.getURLValue&&0!=n.getURLValue){var r=n.getURLValue();r&&(t=r)}return void 0===t||null===t?n.defaultValue:"boolean"==n.type?"true"==t:"float"==n.type?parseFloat(t):"json"==n.type?JSON.parse(t):t},set:function(e,n){var t=a.settings[e];t.getURLValue=!1,"json"==t.type?localStorage.setItem(e,JSON.stringify(n)):localStorage.setItem(e,n)},settings:{showGyms:{type:"boolean",defaultValue:!0},showPokestops:{type:"boolean",defaultValue:!1},showPortals:{type:"boolean",defaultValue:!1},showParks:{type:"boolean",defaultValue:!1},highlightNewFeatures:{type:"boolean",defaultValue:!1},s2Cells:{type:"json",defaultValue:[]},s2CellColors:{type:"json",defaultValue:{1:"#FF6F00",2:"#F57F17",3:"#827717",4:"#33691E",5:"#1B5E20",6:"#004D40",7:"#006064",8:"#01579B",9:"#0D47A1",10:"#1A237E",11:"#6A1B9A",12:"#AD1457",13:"#b71c1c",14:"#BF360C",15:"#FF7043",16:"#FFCA28",17:"#FDD835",18:"#00796B",19:"#0288D1",20:"#64B5F6"}},mapCenter:{type:"json",defaultValue:{lat:52.63282,lng:1.29732}},zoomLevel:{type:"float",defaultValue:13}}};e.exports=a},function(e,n,t){"use strict";var o=t(1),a=t(0),r=[new Date(2018,4,19),new Date(2018,4,5),new Date(2018,3,22),new Date(2018,3,8),new Date(2018,2,22),new Date(2018,2,8),new Date(2018,1,25)],i=[new Date(2018,3,30),new Date(2011,0,1)],l="https://raw.githubusercontent.com/pogo-excalibur/images/master/pogo";function s(e){var n=u(e,r[0]);if(n)return{url:l+"/"+n.id+".png",scaledSize:new google.maps.Size(34,34),anchor:new google.maps.Point(17,17)}}function u(e,n){if(e.migrations&&e.migrations[n]&&e.migrations[n].id>0)return e.migrations[n]}window.initMap=function(){var e=new google.maps.Map(document.getElementById("map"),{center:o.get("mapCenter"),zoom:o.get("zoomLevel"),gestureHandling:"greedy",fullscreenControl:!1,streetViewControl:!0,mapTypeControl:!0,clickableIcons:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.RIGHT_TOP,mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID]}});!function(e){Promise.resolve($.getJSON("/data/nests.json")).then(function(e){return Promise.resolve($.getJSON("/data/manual_nests.json")).then(function(n){return Object.assign(e,n)})}).then(function(e){return $.each(e,function(e,n){n.center=a.coordinateToLatLng(n.center),n.region=$.map(n.region,function(e){return a.coordinateToLatLng(e)}),n.permalinkName=n.name.replace(/[^\w]/g,"").toLowerCase()}),e}).then(function(n){var t=a.urlParameter("nest");if(t){var o=void 0;$.each(n,function(e,n){if(n.permalinkName==t)return o=n,!1}),o&&function(e,n){e.panTo(n.center),e.setZoom(17)}(e,o)}return n}).then(function(e){return Promise.all([e,Promise.all($.map(r,function(e){var n=a.dateToString(e),t="/data/nest_migrations/"+n+".json";return Promise.resolve($.getJSON(t))})),Promise.resolve($.getJSON("/data/pokemon.json"))])}).then(function(e){var n=e[0],t=e[1],o=e[2];return $.each(t,function(e,t){var a=r[e];$.each(n,function(e,n){if(t[e]){if(void 0===t[e].id){var r=o[t[e]];t[e]={id:t[e],name:r.name}}n.migrations||(n.migrations=[]),n.migrations[a]=t[e]}})}),n}).then(function(n){$.each(n,function(n,t){!function(e,n){function t(){n.label.isOpen?(n.label.close(),n.label.isOpen=!1):(n.label.setPosition(n.center),n.label.open(e),n.label.isOpen=!0)}n.polygon=function(e){var n="green";e.date_added==a.dateToString(i[0])&&(n="blue");return new google.maps.Polygon({paths:e.region,fillColor:n,fillOpacity:.5,strokeColor:n,strokeOpacity:1,strokeWeight:0})}(n),n.polygon.setMap(e),n.marker=function(e){return s(e)?new google.maps.Marker({position:e.center,icon:s(e)}):new google.maps.Marker}(n),n.marker.setMap(e),n.label=function(e){var n=$.map(r,function(n,t){var o=0==t?"Current":a.dateToString(n),r=u(e,n);return'\n      <div class="nest-label-pokemon">\n        '+o+": "+function(e){return e?e.name+" (#"+e.id+")":"?"}(r)+"\n      </div>"}).join("\n"),t=location.protocol+"//"+location.host+location.pathname+"?nest="+e.permalinkName,o=void 0;o=e.spawnpoints?e.spawnpoints>1?e.spawnpoints+" spawnpoints":e.spawnpoints+" spawnpoint":"Number of spawnpoints unknown";var i='\n    <div class="nest-label">\n      <div class="nest-label-name">\n        <b>'+e.name+'</b>\n        <a href="'+t+'"><span class="fas fa-link"></span></a>\n      </div>\n      <div class="nest-label-spawnpoints">\n        ('+o+")\n      </div>\n      <br/>\n      "+n+"\n    </div>";return new google.maps.InfoWindow({content:i})}(n),n.label.isOpen=!1,n.polygon.addListener("click",function(){t()}),n.marker.addListener("click",function(){t()}),e.addListener("click",function(){n.label.close(),n.label.isOpen=!1}),n.label.addListener("closeclick",function(){n.label.isOpen=!1})}(e,t)})})}(e),function(e){google.maps.event.addListener(e,"idle",function(){o.set("mapCenter",{lat:e.getCenter().lat(),lng:e.getCenter().lng()}),o.set("zoomLevel",e.getZoom())})}(e)}}]);
//# sourceMappingURL=nests.min.js.map