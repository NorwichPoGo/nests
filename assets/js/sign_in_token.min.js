!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=25)}({0:function(e,t,r){"use strict";var o=r(1),n={get:function(e){var t=n.settings[e],r=localStorage.getItem(e);if(void 0===t.getURLValue&&(t.getURLValue=function(){return o.urlParameter(e)}),t.getURLValue&&0!=t.getURLValue){var a=t.getURLValue();a&&(r=a)}return void 0===r||null===r?t.defaultValue:"boolean"==t.type?"true"==r:"integer"==t.type?parseInt(r):"float"==t.type?parseFloat(r):"json"==t.type?JSON.parse(r):r},set:function(e,t){if(n.get("acceptCookies")){var r=n.settings[e];r.getURLValue=!1,"json"==r.type?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t)}},delete:function(e){localStorage.removeItem(e)},settings:{acceptCookies:{type:"boolean",defaultValue:!1},showGyms:{type:"boolean",defaultValue:!0},showPokestops:{type:"boolean",defaultValue:!1},showPortals:{type:"boolean",defaultValue:!1},showParks:{type:"boolean",defaultValue:!1},highlightNewFeatures:{type:"boolean",defaultValue:!1},exGymsOnly:{type:"boolean",defaultValue:!1},s2Cells:{type:"json",defaultValue:[]},s2CellColors:{type:"json",defaultValue:{1:"#FF6F00",2:"#F57F17",3:"#827717",4:"#33691E",5:"#1B5E20",6:"#004D40",7:"#006064",8:"#01579B",9:"#0D47A1",10:"#1A237E",11:"#6A1B9A",12:"#AD1457",13:"#b71c1c",14:"#BF360C",15:"#FF7043",16:"#FFCA28",17:"#FDD835",18:"#00796B",19:"#0288D1",20:"#64B5F6"}},mapCenter:{type:"json",defaultValue:{lat:52.63282,lng:1.29732}},zoomLevel:{type:"float",defaultValue:13},discordToken:{type:"json",defaultValue:{}},user:{type:"json",defaultValue:{}},features:{type:"json",defaultValue:[]},lastMapUpdate:{type:"integer",defaultValue:0},nests:{type:"json",defaultValue:[]},lastNestUpdate:{type:"integer",defaultValue:0}}};e.exports=n},1:function(e,t,r){"use strict";var o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,n=location.protocol+"//"+location.host+location.pathname;e.exports={urlParameter:function(e){var t=decodeURIComponent(window.location.search.substring(1)).split("&"),r=void 0;return $.each(t,function(t,o){var n=o.split("="),a=n[0],u=n[1];if(a==e&&void 0!==u)return r=u,!1}),r},isMobile:function(){return o.test(navigator.userAgent)},coordinateToLatLng:function(e){return new google.maps.LatLng(e[0],e[1])},dateToString:function(e){function t(e){return e<10?"0"+e:e}return t(e.getFullYear())+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())},isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},coordsFromString:function(e){if(e){var t=e.split(",");if(t&&2===t.length){var r=$.map(t,function(e){return parseFloat(e)});if((0==r[0]||r[0])&&(0==r[1]||r[1]))return r}}},BASE_URL:n,NESTING_SPECIES:[1,4,7,10,13,16,19,21,23,25,27,29,32,35,37,39,41,43,46,48,50,52,54,56,58,60,63,66,69,72,74,77,79,81,84,86,90,92,95,96,98,100,102,104,111,116,118,120,123,124,125,126,127,129,133,138,140,152,155,158,161,163,165,167,170,177,183,187,190,191,193,194,200,202,203,206,209,211,213,215,216,218,220,223,228,252,255,258,261,263,265,273,276,278,283,285,293,296,299,300,304,307,309,316,318,320,322,325,333,339,341,343,353,355,363,370]}},25:function(e,t,r){"use strict";var o=r(0),n=r(1),a=r(7);$(function(){var e=n.urlParameter("accessToken");e&&(o.set("discordToken",{accessToken:e,refreshToken:n.urlParameter("refreshToken"),tokenType:n.urlParameter("tokenType"),expiresIn:n.urlParameter("expiresIn"),scope:n.urlParameter("scope"),retrievedAt:Date.now()}),a.getUserProfile().then(function(){window.location.href="/"}).catch(function(e){console.error(e),window.location.href="/"}))})},7:function(e,t,r){"use strict";var o=r(0);e.exports={DISCORD_API_URL:"https://discordapp.com/api",getUserProfile:function(){var e=o.get("discordToken"),t=e.tokenType||"Bearer",r=$.ajax({url:"https://discordapp.com/api/users/@me",dataType:"json",headers:{Authorization:t+" "+e.accessToken}});return Promise.resolve(r).then(function(e){if(!e||!e.id)throw new Error("Could not retrieve user's profile");o.set("user",{id:e.id,username:e.username,avatar:e.avatar})})},hasTokenExpired:function(e){var t=e.retrievedAt,r=e.expiresIn;return!t||!r||t+1e3*r<Date.now()}}}});
//# sourceMappingURL=sign_in_token.min.js.map