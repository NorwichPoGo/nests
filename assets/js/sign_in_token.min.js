!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=24)}({0:function(e,t,o){"use strict";var r=o(1),n={get:function(e){var t=n.settings[e],o=localStorage.getItem(e);if(void 0===t.getURLValue&&(t.getURLValue=function(){return r.urlParameter(e)}),t.getURLValue&&0!=t.getURLValue){var a=t.getURLValue();a&&(o=a)}return void 0===o||null===o?t.defaultValue:"boolean"==t.type?"true"==o:"float"==t.type?parseFloat(o):"json"==t.type?JSON.parse(o):o},set:function(e,t){if(n.get("acceptCookies")){var o=n.settings[e];o.getURLValue=!1,"json"==o.type?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t)}},settings:{acceptCookies:{type:"boolean",defaultValue:!1},showGyms:{type:"boolean",defaultValue:!0},showPokestops:{type:"boolean",defaultValue:!1},showPortals:{type:"boolean",defaultValue:!1},showParks:{type:"boolean",defaultValue:!1},highlightNewFeatures:{type:"boolean",defaultValue:!1},exGymsOnly:{type:"boolean",defaultValue:!1},s2Cells:{type:"json",defaultValue:[]},s2CellColors:{type:"json",defaultValue:{1:"#FF6F00",2:"#F57F17",3:"#827717",4:"#33691E",5:"#1B5E20",6:"#004D40",7:"#006064",8:"#01579B",9:"#0D47A1",10:"#1A237E",11:"#6A1B9A",12:"#AD1457",13:"#b71c1c",14:"#BF360C",15:"#FF7043",16:"#FFCA28",17:"#FDD835",18:"#00796B",19:"#0288D1",20:"#64B5F6"}},mapCenter:{type:"json",defaultValue:{lat:52.63282,lng:1.29732}},zoomLevel:{type:"float",defaultValue:13},discordToken:{type:"json",defaultValue:{}},user:{type:"json",defaultValue:{}}}};e.exports=n},1:function(e,t,o){"use strict";var r=location.protocol+"//"+location.host+location.pathname;e.exports={urlParameter:function(e){var t=decodeURIComponent(window.location.search.substring(1)).split("&"),o=void 0;return $.each(t,function(t,r){var n=r.split("="),a=n[0],u=n[1];if(a==e&&void 0!==u)return o=u,!1}),o},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},coordinateToLatLng:function(e){return new google.maps.LatLng(e[0],e[1])},dateToString:function(e){function t(e){return e<10?"0"+e:e}return t(e.getFullYear())+"-"+t(e.getMonth())+"-"+t(e.getDate())},isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},coordsFromString:function(e){if(e){var t=e.split(",");if(t&&2===t.length){var o=$.map(t,function(e){return parseFloat(e)});if((0==o[0]||o[0])&&(0==o[1]||o[1]))return o}}},BASE_URL:r,NESTING_SPECIES:[1,4,7,10,13,16,19,21,23,25,27,29,32,35,37,39,41,43,46,48,50,52,54,56,58,60,63,66,69,72,74,77,79,81,84,86,90,92,95,96,98,100,102,104,111,116,118,120,123,124,125,126,127,129,133,138,140,152,155,158,161,163,165,167,170,177,183,187,190,191,193,194,200,202,203,206,209,211,213,215,216,218,220,223,228,252,255,258,261,263,265,273,276,278,283,285,293,296,299,300,304,307,309,316,318,320,322,325,333,339,341,343,353,355,363,370]}},24:function(e,t,o){"use strict";var r=o(0),n=o(1),a=o(6);$(function(){var e=n.urlParameter("accessToken");e&&(r.set("discordToken",{accessToken:e,refreshToken:n.urlParameter("refreshToken"),tokenType:n.urlParameter("tokenType"),expiresIn:n.urlParameter("expiresIn"),scope:n.urlParameter("scope"),retrievedAt:Date.now()}),a.getUserProfile().then(function(){window.location.href="/"}).catch(function(e){console.error(e),window.location.href="/"}))})},6:function(e,t,o){"use strict";var r=o(0);e.exports={DISCORD_API_URL:"https://discordapp.com/api",getUserProfile:function(){var e=r.get("discordToken"),t=e.tokenType||"Bearer",o=$.ajax({url:"https://discordapp.com/api/users/@me",dataType:"json",headers:{Authorization:t+" "+e.accessToken}});return Promise.resolve(o).then(function(e){if(!e||!e.id)throw new Error("Could not retrieve user's profile");r.set("user",{id:e.id,username:e.username,avatar:e.avatar})})},hasTokenExpired:function(e){var t=e.retrievedAt,o=e.expiresIn;return!t||!o||t+1e3*o<Date.now()}}}});
//# sourceMappingURL=sign_in_token.min.js.map